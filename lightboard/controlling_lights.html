<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

		<!-- Bootstrap core CSS -->
		<link href="bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="css/cover.css" rel="stylesheet">

		<title>First Bytes: Guide</title>

	</head>

	<body>
		<div class="site-wrapper">
	      <div class="site-wrapper-inner">
	        <div class="cover-container">
	          <div class="masthead clearfix">
	            <div class="inner">
	             <h2 class="masthead-brand"><b>UTCS Lean In:</b> Project Illuminate</h2>
	              <ul class="nav masthead-nav">
	                <li><a href="index.html">Home</a></li>
	                <li>
					<!-- TODO: figure out sub dropdown menus -->
					<a role="menuitem" tabindex="-1" target="_blank" href="tutorial">C++ Tutorial</a>
					</li>
					<li>
						<!-- TODO: figure out sub dropdown menus -->
						<a role="menuitem" tabindex="-1" href="audacity.html">Audacity Tutorial</a>
					</li>
					<li>
	                		<a role="menuitem" tabindex="-1" href="first_timers.html">First Timers</a>
	                	</li>
					<li class="active">
                		<div id="setup"></div>
                	</li>
                	<br>
                	<li>
                		<div id="programming"></div>
                	</li>

                	<li>
                		<div id="examples"></div>
                	</li>
                	<li>
                		<div id="resources"></div>
                	</li>
	                <li><a href="contact.html">Contact</a></li>
	              </ul>
	            </div>
	          </div>

	          <div class="inner cover">
	          	<hr>
				<center>
				<h1>Controlling the Lights</h1>
				</center>
				<hr>
				<br>
				
				<h3>Software</h3>
				
				<p>
					Now that the hardware is set up, let's take a look at the
					software. <i>Software</i> is the programs that tell the hardware what
					to do.  We've already seen an example of a piece of software that
					controls the Arduino board: the <tt>Blink</tt> program.  Now let's
					begin looking at software to control the lights through the Arduino
					board.
				</p>
				
				<p>
					To begin, you'll first need to download the First Bytes framework into your home
					directory.  Right click on the link below and then save the file.
				</p>
				
				<p>
				 	<a href="">First BytesFramework</a>
				</p>
				
				<p>
				Then, using the terminal from which you opened the Arduino IDE, type the
				following commands, which will unzip and expand the archive you just downloaded:<br><br>
				  <p class="code">
				  <command-line-output>
				    <br>
					&emsp;gunzip firstbytes_framework.tar.gz&emsp;<br>
					&emsp;tar -xvf firstbytes_framework.tar&emsp;<br>
					<br>
				  </p>
				  </command-line-output>
				</p>
				
				<p>
					Next, we need to open the Project Illuminate framework.
					From within the Arduino IDE, select <tt>File->Open</tt>.  From there,
					navigate to your home directory and click on the <tt>firstbytes</tt>
					folder.  Within that directory, you'll find
					a <tt>project_framework</tt> folder.  Double click on that and and then again
				on <tt>project_framework.ino</tt>.
				</p>
				 
				 <p>
					The Arduino sketchbook called <tt>project_framework</tt> should be
					opened.
					<!--<p>
					Note: If you are doing this from home and not as part of the First
					Bytes camp, you can <a href="request.html">download the
					framework</a>.-->
				</p>
				
				<p>
					This framework already consists of a few files (indicated by the tabs across the
					top), and you may add your own as you progress in the project. The pre-existing
					files are briefly described here, and we'll look at some of them more in-depth
					below.
				</p>
				<p>
					<ul>
						<li>
							<tt>project_framework</tt>: this file contains
							the <tt>setup()</tt> and <tt>loop()</tt> functions that we also saw in
							the <tt>Blink</tt> example.  The <tt>setup()</tt> function is complete
							as provided (for now, as you know more you may want to change it), but
							you'll be modifying the <tt>loop()</tt> function.
						</li>
						
						<li>
							<tt>lights/lights.h</tt>: these files are a header file
							(<tt>lights.h</tt>) and source file (<tt>lights</tt>).  These
							files contain the data structures that provide access to the lights
							and functions that will enable some basic capabilities.  You'll want to
							use the functions, but you should not need to change any of the code
							in these files.
						</li>
						
						<li>
							<tt>tests/tests.h</tt>: these are the files where you will begin
							programming.  They contain the stub code for many functions that will
							help you learn to control the lights yourself.
						</li>
						
						<li>
							<tt>project/project.h</tt>: these are the files where you will put your code
							for your project, once you finish the lights tutorial.
						</li>
					</ul>
				</p>

				<p>
					Some important things to note before we begin programming:
					<ul>
						<li> 
							The framework depends on functions and data structures defined in the
							FastLED library, which is included in the <tt>lib</tt> directory of your framework.  We will only be using some of its capabilities, though.
						</li>
						
						<li>
							The framework is set up so that you make changes to the lights in
							the <tt>leds</tt> data structure but those changes are not
							reflected in the actual lights immediately.  Instead, when you are
							ready for your changes to be reflected in the lights, you call the
							function <tt>FastLED.show()</tt>, which calls the <tt>show()</tt> function in
							the FastLED library, and will mirror your changes into
							the actual lights.
						</li>
						
						<li>
							While <tt>FastLED.show()</tt> updates the lights with your changes, we
							often want the changes we've made to appear for some amount of time before the
							lights change again.  To help us do that, the FastLED library provides a
							function called <tt>delay</tt>, which you call in the exact same manner
							as <tt>show()</tt>, with one addition: the <tt>delay</tt> function
							takes one argument.  That argument tells the program how long it should wait
							  <i> in milliseconds</i> before proceeding to the next instruction.  For
							  example, if you would like to delay for one second, use the command:<br>
							  <tt>
								FastLED.delay(1000)</><br>
							  </tt>
							  <tt>delay()</tt> also calls <tt>show()</tt>, so you don't have to call one and
							then the other each time you want to update your lights. (Why might you want
							to <tt>show()</tt> without providing a delay?)
						</li>
						
						<li> 
							Each light is represented by a struct called <tt>CRGB</tt>.  This struct
							contains fields <tt>red</tt>, <tt>green</tt>, and <tt>blue</tt>.  The color and
							brightness of each light is controlled by setting the values of those fields.
							The potential values for each field range from 0-255, where 0 represents no
							color and 255 represents maximum color.  Using variations of these numbers, you
							can create many colors with a range of brightnesses.  For instance,
							a <tt>red</tt> value of 255 and <tt>green</tt> and <tt>blue</tt> values of 0
							result in the brightest red possible, where a <tt>red</tt> value of 64 and green
							and blue values of 0 is red at about 1/3 of maximum brightness. White is
							represented as 255, 255, 255, and black, which is the same as off, is
							represented as 0, 0, 0.
						</li>
						
						<li> 
							The FastLED library also provides many predefined colors for
							you. We <a href="https://docs.google.com/document/d/1QY85vLz8qK-xxumCuDploXaDOspO0OfxWeie8CQJsLI/pub">have
							created a sorted list for you</a>, or you may consult the list in
							 <tt>lib/pixeltypes.h</tt> line 464, which is in your <tt>project_framework</tt>
							directory.  The colors in the file can be accessed by prepending <tt>CRGB::</tt>
							to the name, such as <tt>CRGB::Aquamarine</tt>.
						</li>
						
						<li> 
							The brightness of the light set as a whole is controlled through the
							function <tt>FastLED.setBrightness()</tt>, which sets the brightness for the
							entire strand of lights.  Brightness values range from 0 to 255.  Beware,
							though, as the 255 value results in very bright lights and some colors appear
							faded.  <!--The default value for brightness in your infrastructure is 64. -->
							To get some idea of how the colors appear at brightness level 64, execute the
							ColorPalette example in the FastLED library, which is found
							in <tt>project_framework/lib/examples/ColorPalette</tt>.  You can launch it by
							either opening the .ino file in that directory through the Arduino IDE or by
							navigating to that directory using the Navigator (double click on the hard drive
							labeled <tt>File System</tt> on your desktop).
						</li>
					</ul>
				</p>
				
				<h3>Challenge 3 - Part 1:</h3>
				<h4>Blink Light 0</h4>
				
				<p>
					Now, let's look at the <tt>tests</tt> file.  At the top of this
					file, there is a function called <tt>blink_light_0_example</tt>, which
					is provided for you.  Take a careful look at that function and
					convince yourself that you understand its contents.  You'll also
					notice that this function is called from the <tt>loop()</tt> function
					inside the <tt>project_framework</tt> file. When you are ready, test
					the example by uploading it to the Arduino board (use the arrow
					pointing to the right as you did to blink the LED).  The lights will
					first perform some tests where they alternate PaleVioletRed
					and SteelBlue, and then the code in the <tt>loop()</tt> function will begin
					to execute.  In this case, that code is
					our <tt>blink_light_0_example()</tt>.
				</p>
				
				<p>
					If the code works properly, you should notice light 0 blinking white.
					(Notice that this is light <b>0</b> and not light <b>1</b>!)  Now,
					change the code to do the following things:
					<ul>
						<li> 
							Blink a color other than white. Remember that <tt>pixeltypes.h</tt>
							has pre-defined colors.  You are also welcome to define your own.  You can set
							the colors individually using code such as the code below, which changes the
							color of light 0:
							
							<p class="code">
								<br>
								&emsp;leds[<num>0</num>].red = <num>112</num>;&emsp;<br>
								&emsp;leds[<num>0</num>].green = <num>75</num>;&emsp;<br>
								&emsp;leds[<num>0</num>].blue = <num>23</num>;&emsp;<br>
								<br>
							</p>
						</li>
						
						<li> Blink at a different brightness level.</li>
						
						<li> Blink at either a faster or slower frequency.</li>
					</ul>
				</p>
				
				<h3>Challenge 3 - Part 2:</h3>
				<h4>Blink the First and Last Lights</h4>
				
				<p>
					For our next test, let's blink both the first and last light.  Recall
					that we have 25 lights.  If the first light is number 0, what do you
					suppose the last light is?
				</p>
				
				<p>
					Using the information you learned in Task 3.1, complete
					the <tt>blink_light_0_and_24()</tt> function in <tt>tests</tt> so that the first
					and last lights blink.  Test your function by commenting out the call
					to <tt>blink_light_0_example</tt> in the <tt>loop()</tt> function
					in <tt>project_framework</tt> and uncommenting the call
					to <tt>blink_lights_0_and_24()</tt> in that same function. Please ask if you
					need help!
				</p>

				<h3>Challenge 1 - Part 3:</h3>
				<h4>Blink All Lights</h4>

				<p>
					In your C++ tutorial, you learned how to use<!--  loops. <!-- (If you didn't complete
					that part yet, go back and complete it now.)--> Using a loop, complete
					the <tt>blink_all_lights()</tt> function so that every light blinks.  Once
					again, test it by commenting out any calls to other functions in
					the <tt>loop()</tt> function in <tt>project_framework</tt> and
					uncommenting the call to <tt>blink_all_lights()</tt> in that same function. -->
				</p>
				
				<p>
					<b>
						 Congratulations!  You are able to control the lights!  Now you are
						ready to begin doing more complicated things.  Next, you'll learn to
						create <a href="basic_patterns.html">basic patterns</a>.
					</b>
				</p>
	          </div>
	        </div>
	      </div>
	    </div>

	<!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<script src="http://www.w3schools.com/lib/w3data.js"></script>

    <script src="js/load.js"></script>

	</body>
</html>
